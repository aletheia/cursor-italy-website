---
import clsx from 'clsx';

interface Props {
  title?: string;
  description?: string;
  image?: string;
  href?: string;
  external?: boolean;
  class?: string;
}

const {
  title,
  description,
  image,
  href,
  external = false,
  class: className,
} = Astro.props;

const baseClasses =
  'bg-white rounded-xl shadow-sm border border-gray-200 transition-all duration-200 hover:shadow-md';
---

{href ? (
  external ? (
    <a
      href={href}
      target='_blank'
      rel='noopener noreferrer'
      class='block hover:shadow-lg hover:-translate-y-1 transition-all duration-200'
    >
      <div class={clsx(baseClasses, className)}>
        {image && (
          <div class='relative h-48 overflow-hidden rounded-t-xl'>
            <img
              src={image}
              alt={title || 'Card image'}
              class='object-cover w-full h-full'
            />
          </div>
        )}
        <div class='p-6'>
          {title && (
            <h3 class='text-xl font-semibold text-gray-900 mb-2'>{title}</h3>
          )}
          {description && <p class='text-gray-600 mb-4'>{description}</p>}
          <slot />
        </div>
      </div>
    </a>
  ) : (
    <a
      href={href}
      class='block hover:shadow-lg hover:-translate-y-1 transition-all duration-200'
    >
      <div class={clsx(baseClasses, className)}>
        {image && (
          <div class='relative h-48 overflow-hidden rounded-t-xl'>
            <img
              src={image}
              alt={title || 'Card image'}
              class='object-cover w-full h-full'
            />
          </div>
        )}
        <div class='p-6'>
          {title && (
            <h3 class='text-xl font-semibold text-gray-900 mb-2'>{title}</h3>
          )}
          {description && <p class='text-gray-600 mb-4'>{description}</p>}
          <slot />
        </div>
      </div>
    </a>
  )
) : (
  <div class={clsx(baseClasses, className)}>
    {image && (
      <div class='relative h-48 overflow-hidden rounded-t-xl'>
        <img
          src={image}
          alt={title || 'Card image'}
          class='object-cover w-full h-full'
        />
      </div>
    )}
    <div class='p-6'>
      {title && (
        <h3 class='text-xl font-semibold text-gray-900 mb-2'>{title}</h3>
      )}
      {description && <p class='text-gray-600 mb-4'>{description}</p>}
      <slot />
    </div>
  </div>
)}
